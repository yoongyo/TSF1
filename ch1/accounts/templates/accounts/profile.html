{% extends "base.html" %}

{% block content %}
{% load static %}
<head>
    <meat charset="UTF-8"/>
    <link rel="stylesheet" href="{% static 'css/fullcalendar.css' %}" type="text/css">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.min.js"></script>
    <script type="text/javascript" src="{% static 'js/fullcalendar.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/gcal.js' %}"></script>
    
    <script type="text/javascript">
    $(function(){
        
        // 현재 일시를 취득하기
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        // 객체 생성
        $('#calendar').fullCalendar({
            // 헤더의 지정
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month, basicWeek, basicDay'
            },
            // 타이틀의 포맷
            titleFormat: {
                month: 'yyyy년 M월',
                week: '[yyyy년 ]M월 d일{~[yyyy년 ] [ M월] d일}',
                day: 'yyyy년 M월 d일 dddd'
            },
            //월일의 포맷
            columnFormat: {
                month: 'ddd',
                week: 'M/d(ddd)',
                day: 'M/d(ddd)'
            },
            //요일의 포맷
            dayNames: ['일요일','월요일','화요일','수요일','목요일','금요일','토요일'],
            dayNamesShort: ['SUN', 'MON', 'TUE','WEN','THU','FRI','SAT'],
            // tlrksdml 포맷
            timeFormat: {
                '': 'H:mm{ - H:mm}'
            },
            // 버튼의 표시명
            buttonText: {
                today: '금일',
                month: '월',
                week: '주',
                day: '일'
            },
            // Event Sources 객체에서의 지정
            eventSources: [
                {
                    color:'darkred',
                    textColor:'white'
                }
            ],
            eventColor: 'blue',
            // Event 객체에서의 지정
            events: [
                {% for i in list %}
                {   
                    title: '{{ i.title }}',
                    start: new Date(y,m,1,'2'),  // 이번 달 1일
                    end: new Date(y,m,1,14,3),
                    allDay: false,
                    textColor: 'black'
                },
                {
                    title: '{{ i.City }}',
                    start: new Date(y,m,10,19,0), // 이번달 10일 9시
                    end: new Date(y,m,10,22,30),  // 이번달 10일 23시 30분
                    allDay: false,
                    textColor: 'darkred'
                },
                {% endfor %}
            ],           
            eventColor: '',
            editable: false
        });
    });
    </script>
    <style type='text/css'>
        body {
            font-size: 13px;
        }
        #calendar {
            width: 600px;
        }
        .fc-sat{
            color:blue;
        }
        .fc-sun {
            color: red;
        }
    </style>
</head>
<body>
<div class="container" style="padding-top:30px;">
    <h1 class="text-center">MY PAGE</h1>
    <h3 class="text-center">프로필 관리, 투어 프로그램 관리, 예약 일정관리 페이지</h3>

    <div class="row">
        <div class="col-md-4 col-md-offset-1 col-sm-11" style="border:1px solid black; margin-right:10px;">
            <div style="border:1px solid black; margin:15px 0; padding:10px; border-radius:5px;" >Language : {{ user.profile.language|default:'empty' }}</div>
            <div style="border:1px solid black; margin:15px 0; padding:10px; border-radius:5px;">Major : {{ user.profile.major }}</div>
            <div style="border:1px solid black; margin:15px 0; padding:10px; border-radius:5px;">Visited Country : {{ user.profile.visitedCountry }}</div>
            <div style="border:1px solid black; margin:15px 0; padding:10px; border-radius:5px;">Next Travel : {{ user.profile.nextCountry }}</div>
            <div style="border:1px solid black; margin:15px 0; padding:10px; border-radius:5px;">Interest : {{ user.profile.interest }}</div>
            <a href="{% url 'accounts:profileEdit' %}" class="btn btn-primary">Change Profile</a>
        </div>
        <div class="col-md-6 col-sm-11" style="border: 1px solid black; margin-left:10px; min-height:300px; padding-top:15px;">
            {% for i in list %}
            <div class="row">    
                <div class="col-md-10">    
                    <div class="well clearfix" style="background-color:rgb(243,243,243); padding:10px;">
                        <article class="box">
                            <a href="{% url 'travel:local_detail_form' i.City i.pk %}">
                                <figure class="col-md-5">
                                    <img src="{{ i.img.url }}" style="max-height:140px; width:100%">
                                    <div style="text-align:center; background:#fff;padding:3px 10px">{{ i.Tourtype }}</div>
                                </figure>
                                <div class="col-md-7">
                                    <h4>{{ i.title }}</h4>
                                    <br>
                                    {{ i.Price}}
                                    <br>
                                    {{ i.Duration}}
                                    <br>
                                    {{ i.Language }}
                                    <br>
                                    {{ i.HashTag }}
                                </div>
                            </a>
                        </article>
                    </div>
                </div>
                <div class="col-md-1" style="padding-top:11%">
                    <a href="{% url 'travel:post_edit' i.City i.pk %}" class="btn btn-primary">Modify</a>
                </div>     
            </div>
            {% endfor %}
            {% for i in bk %}         
            <div class="row" style="margin-bottom:10px; border:1px solid black; margin:10px 0px; border-radius: 3px; padding:4px; max-height:42px;">
                <div class="col-md-9">
                    <div style=" border-radius: 4px;">
                        {{ i.content }}
                        {{ i.FirstName }}
                        {{ i.LastName }}
                        {{ i.Age }}
                    </div>
                </div>
                <div class="col-md-3" style="margin:0px;padding:0px;">
                    <div class="btn btn-primary">Detail</div>
                    <div class="btn btn-primary">Reject</div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div id="calendar"></div>
    </div>
    <img src="{{ user.socialaccount_set.all.first.get_avatar_url }}" />

    <a href="{% url 'accounts:logout' %}?next={{ request.path }}" onclick="return confirm('Are you sure?');"><h2>로그아웃하기</h2></a>
    <a href="{% url 'accounts:profile' %}"><h2>가이드로 등록하기</h2> </a>

    </div>
</div>
</body>




{% endblock %}
